<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <title>パンの</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

    <style>
      html {
  font-family: "Helvetica Neue",
    Arial,
    "Hiragino Kaku Gothic ProN",
    "Hiragino Sans",
    Meiryo,
    sans-serif;
        line-height: 1.8;
        height: 100%;
        word-break: break-word;
        color: #0f0700;
        background-color: var(--color-base);
        appearance: none;
        -webkit-appearance: none;
        -webkit-tap-highlight-color: transparent;
      }
      
      body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
        background-image: url("https://panzuki.github.io/3sp/images/bg2.jpg");
        background-size: cover;
        background-position: center bottom;
        width: 100vw;
      }

      .container {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 20px;
        width: 90vw;
        height: 90vh;
        position: relative;
        transition: all 0.2s ease; /* レイアウト変更時のアニメーション */
      }

      .center-text {
        position: relative;
        grid-column: 2 / 4;
        grid-row: 2 / 4;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: clamp(20px, 12rem, calc((90vw - 60px) / 2 / 4));
        font-weight: bold;
        color: #0f0700;
        -webkit-text-stroke:4px #fff7f0;

/*         background-color: rgba(255, 255, 255, 0.1); 
        border: 1px solid rgba(255, 255, 255, 0.4); 
        border-bottom-color: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        -webkit-backdrop-filter: blur(9px); 
        backdrop-filter: blur(5px);
        box-shadow: 0 5px 10px rgba(100, 100, 100, 0.4);        */ 
        text-shadow: 0 8px 12px rgba(0, 0, 0, 0.8); 

      }

      .box {
        position: relative;
        width:100%;
        height:100%;
        clip-path: polygon(65% 30%, 75% 0, 85% 30%, 100% 65%, 85% 100%, 15% 100%, 0 65%, 15% 30%, 25% 0, 35% 30%);
        padding: 0em 0em 0em 0em;
        font-size: clamp(16px, 4.5rem, calc((90vw - 60px) / 4 / 7));
        text-align: center;
        color: #0f0700;
        background-color: rgba(255, 247, 240, 0.1); /* 背景色 */
        border: 1px solid rgba(255, 247, 240, 0.5);
/*         border-right: 28px solid; */
/*         border-right-color: rgba(37, 137, 208, 0.5); */
        border-bottom-color: rgba(255, 247, 240, 0.6);
/*         border-radius: 5px; */
        -webkit-backdrop-filter: blur(8px); /* ぼかしエフェクト */
        backdrop-filter: blur(4px);
/*         box-shadow: 0 5px 10px rgba(100, 100, 100, 0.4);  */
        font-weight: bold;
        transition: all 0.1s ease;
      }
.box {
  filter: drop-shadow(0 5px 10px rgba(100, 100, 100, 0.8));
  position: relative;
}
.box::before {
  background-color: rgba(255, 247, 240, 0.1);
  clip-path: polygon(65% 30%, 75% 0, 85% 30%, 100% 65%, 85% 100%, 15% 100%, 0 65%, 15% 30%, 25% 0, 35% 30%);
  content: "";
  display: block;
  height: 100%;
  position: absolute;
  width: 100%;
}

/*       .box::before {
        position: absolute;
        bottom: 2px;
        right: -20px;
        z-index: -1;
        transform: rotate(5deg);
        width: 100%;
        height: 50%;
        background-color: rgba(0, 0, 0, 0.9);
        content: "";
        filter: blur(4px);
        z-index: -1;
        -webkit-transition: all 0.3s ease-in-out;
        transition: all 0.3s ease-in-out;
      } */
      
      .box:hover {
/*         border-right-color: rgba(208, 37, 37, 0.7); */
/*         border-right: 27px solid #d02525; */
/*         box-shadow: 0 5px 10px rgba(100, 100, 100, 0.8); */
        background-color: rgba(210, 37, 37, 0.8);
        font-size: clamp(18px, 4.6rem, calc((90vw - 60px) / 4 / 7 * 1.1));
      }
      
/*       .box:hover::before,
      .box:hover::after {
        
      } */

      a {
        color: inherit;
        display:flex;
        box-sizing: border-box;
        height: 100%;
        padding-top: clamp(2px, 4.8rem, calc((90vh - 60px) / 4 * 0.3));
        clip-path: polygon(65% 30%, 75% 0, 85% 30%, 100% 65%, 85% 100%, 15% 100%, 0 65%, 15% 30%, 25% 0, 35% 30%);
        text-decoration: none; /* 下線を消す */
        justify-content: center;
        align-items: center;
        transition: all 0.1s ease;
      }
      .center-link{
        padding: none;
        clip-path:none;
      }

      .menu-layout {
        grid-template-columns: none;
        grid-template-rows: repeat(13, 1fr); /* すべてのボックスが縦に並ぶ */
        justify-content: flex-start; /* 左端に揃える */
        gap: 3px; /* メニュー項目間のスペースを縮小 */
        width: 15vw; /* メニュー全体の幅を15vwに */
        height: 100vh; /* 画面全体の高さに拡大 */
        position: fixed; /* 左端に固定 */
        top: 0;
        left: 0;
      }

      .menu-layout .box {
        width: 100%; /* 幅を100%にして左側に配置 */
        height: 6vh; /* 各ボックスの高さをvhで設定して縦に並べる */
        font-size: 1vw;
        padding: 0;
      }

      .menu-layout .center-text {
        grid-column: 1 / 2;
        grid-row: 1 / 2;
        font-size: 2vw; /* メニューの一番上に小さめのパンを表示 */
        align-self: center; /* 上に揃える */
        margin: 5px;
      }
	    canvas { background-color : rgba(255, 247, 240, 0.1);
		   }
.big-circle {
  width: 400px;
  aspect-ratio: 1;
  border-radius: 50%;
  border: dashed 1px #777;
  margin: 50px;
  position: relative;
}

.small-circle {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: #777;
  font-size: 32px;
  font-weight: 700;
  color: #fff;
  line-height: 80px;
  text-align: center;
  position: absolute;
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
}

	    
    </style>
  </head>
  <body>
<!--     <div class="container" id="container">   
      <div class="box"><a href="saying.html">ことわざ</a></div>
      <div class="box"><a href="short.html">小ネタ</a></div>
      <div class="box"><a href="map.html">小麦の伝来</a></div>
      <div class="box"><a href="history1.html">歴史1</a></div>
      <div class="box"><a href="#culture"></a></div>
      <div class="box"><a href="#economy"></a></div>
      <div class="center-text"><a class="center-link" href="index.html">パンの</a></div>
      <div class="box"><a href="#politics"></a></div>
      <div class="box"><a href="#science"></a></div>
      <div class="box"><a href="#education"></a></div>
      <div class="box"><a href="#geography"></a></div>
      <div class="box"><a href="#law"></a></div>
      <div class="box"><a href="#food"></a></div>
    </div> -->
	  <div>
		  <canvas id="myChart" width="600" height="400"></canvas>
	  </div>


<div class="big-circle">
　　　<div class="small-circle"><a href="saying.html">ことわざ</a></div>
      <div class="small-circle"><a href="short.html">小ネタ</a></div>
      <div class="small-circle"><a href="map.html">小麦の伝来</a></div>
      <div class="small-circle"><a href="history1.html">歴史1</a></div>
</div>
	  
	  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
      
      <script>
$(function () {
  var item_num = $(".small-circle").length;
  var deg = 360.0 / item_num;
  var radians = (deg * Math.PI) / 180.0;
  var radians90 = (90 * Math.PI) / 180.0;
  var circle_r = $(".big-circle").width() / 2;
  $(".small-circle").each(function (i, elem) {
    var x = Math.cos(radians * i - radians90) * circle_r + circle_r;
    var y = Math.sin(radians * i - radians90) * circle_r + circle_r;
    $(elem).css("left", x);
    $(elem).css("top", y);
  });
});
	      
const isArray = a => a instanceof Array;
const isNull = a => a == null;
const cursor = a => {
  if (isNull(a)) return 'default';
  if (!isArray(a)) return 'pointer';
  if (isArray(a) && a.length > 0) return 'pointer';
  return 'default';
};
const $canvas = document.getElementById('myChart');

let hoveredLabelIndex = -1;  // ホバー中のラベルインデックスを保持
let animationProgress = 0;   // アニメーションの進行度（0から1）

const onHover = (evt, item, chart) => {
  const { x, y } = evt;
  hoveredLabelIndex = -1;

  // ラベルへのホバーを検出するロジック
  for (let i = 0; i < chart.scales.r._pointLabelItems.length; i++) {
    const { bottom, top, left, right } = chart.scales.r._pointLabelItems[i];

    if (x >= left && x <= right && y >= top && y <= bottom) {
      hoveredLabelIndex = i;
      break;
    }
  }

  // ホバーしている場合にポインターを表示
  if (hoveredLabelIndex !== -1) {
    $canvas.style.cursor = 'pointer';
    animationProgress = 0;  // アニメーションの開始をトリガー
  } else {
    $canvas.style.cursor = 'default';
    animationProgress = 1;  // リセットして元に戻す
  }

  // アニメーション更新
  chart.draw();
};

const onLeave = (evt, chart) => {
  $canvas.style.cursor = 'default';
  hoveredLabelIndex = -1;
  animationProgress = 1;  // 元に戻すアニメーション
  chart.draw();
};

const options = {
  type: 'radar',
  data: {
    labels: ["ことわざ", "小ネタ", "小麦の伝来", "歴史1", "準備中", "準備中"],
    datasets: [
      {
        label: '# of Votes',
        data: [12, 19, 3, 5, 2, 3],
        borderColor: 'orange'
      },
      {
        label: '# of Points',
        data: [7, 11, 5, 8, 3, 7],
        borderColor: 'pink'
      }
    ]
  },
	options: {
		tooltips: {
			enabled: false
		},
    animations: {
      tension: {
        duration: 1000,
        easing: 'linear',
        from: 1,
        to: 0,
        loop: true
      },
    },
    responsive: true,
    onHover: (e, item, chart) => onHover(e, item, chart),  // chartを渡す
    plugins: {
      legend: {
        onHover: (e, item, chart) => onHover(e, item, chart),  // chartを渡す
        onLeave: (e, chart) => onLeave(e, chart),  // chartを渡す
	display:false
      }
    },
    scales: {
      r: {
	    ticks: {
		display: false
	    },
        pointLabels: {
          font: {
            size: 16,  // 基本のラベルサイズを大きく
            weight: 'bold'  // ラベルを太字に
          },
          color: 'rgba(0, 0, 0, 0)'  // デフォルトのラベルを透明に
        }
      }
    },
    onClick: (evt, activeEls, chart) => {
      const { x, y } = evt;
      let index = -1;

      for (let i = 0; i < chart.scales.r._pointLabelItems.length; i++) {
        const { bottom, top, left, right } = chart.scales.r._pointLabelItems[i];

        if (x >= left && x <= right && y >= top && y <= bottom) {
          index = i;
          break;
        }
      }

      if (index === -1) {
        return;
      }
      const linklist = ['saying.html', 'short.html', 'map.html', 'history.html', '#', '#'];
      const clickedLabeltrans = linklist[index];

      location.href = `https://panzuki.github.io/3sp/${clickedLabeltrans}`;
    }
  },
  plugins: [{
    // カスタムプラグインでホバー時にラベルをスムーズに拡大する
    afterDraw: (chart) => {
      const ctx = chart.ctx;
      const pointLabels = chart.scales.r._pointLabelItems;

      // 通常のラベル描画を抑制し、カスタム描画
      chart.scales.r.draw();  // レーダーチャートはそのまま描画

      // カスタム描画
      for (let i = 0; i < pointLabels.length; i++) {
        const label = pointLabels[i];
        const fontSize = (i === hoveredLabelIndex) 
          ? 16 + 8 * animationProgress  // ホバー時にサイズを変える
          : 16;  // 通常時のサイズ

        ctx.save();
        ctx.font = `bold ${fontSize}px Arial`;
        ctx.fillStyle = (i === hoveredLabelIndex) ? 'red' : 'black';  // ホバー時の色変更
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(chart.data.labels[i], label.left + (label.right - label.left) / 2, label.top + (label.bottom - label.top) / 2);
        ctx.restore();
      }

      // アニメーション進行度を更新
      if (hoveredLabelIndex !== -1 && animationProgress < 1) {
        animationProgress += 0.15;  // アニメーションを高速化
      } else if (hoveredLabelIndex === -1 && animationProgress > 0) {
        animationProgress -= 0.15;  // 元に戻すアニメーションも高速化
      }

      if (animationProgress > 1) animationProgress = 1;  // 上限を1に
      if (animationProgress < 0) animationProgress = 0;  // 下限を0に
    }
  },
  {
    // レーダーチャートの中心にテキストを表示するプラグイン
    afterDraw: (chart) => {
      const ctx = chart.ctx;
      const centerX = chart.chartArea.width / 2 + chart.chartArea.left;
      const centerY = chart.chartArea.height / 2 + chart.chartArea.top;
      
      // 中央にテキストを描画
      ctx.save();
      ctx.font = 'bold 30px Arial';
      ctx.fillStyle = 'blue';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText('パンの', centerX, centerY);
      ctx.restore();
    }
  }]
};

const ctx = document.getElementById('myChart').getContext('2d');
new Chart(ctx, options);

      </script>
  </body>
</html>
